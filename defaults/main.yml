---

install_updates: yes
remove_apps: no
clean_up_components: yes
upgrade_powershell: no
powershell_target_version: 3.0
temp_directory: "{{ ansible_env.TEMP }}"
update_retry_limit: 10
upgrade_wait_timeout: 600

powershell_script_url: https://raw.githubusercontent.com/oatakan/ansible-role-windows-template-build/master/files/Upgrade-PowerShell.ps1
powershell_upgrade_script_file: 'C:\Upgrade-PowerShell.ps1'

ps_memfix_script_url: https://raw.githubusercontent.com/oatakan/ansible-role-windows-template-build/master/files/Install-WMF3Hotfix.ps1
ps_memfix_script_file: 'C:\Install-WMF3Hotfix.ps1'

set_network_to_private: '([Activator]::CreateInstance([Type]::GetTypeFromCLSID([Guid]"{DCB00C01-570F-4A9B-8D69-199FDBA5723B}"))).GetNetworkConnections() | % {$_.GetNetwork().SetCategory(1)}'

enable_tlsv12_hotfix_download_location: "{{ ansible_env.TEMP }}"
enable_tlsv12_hotfix:
  kb: KB3080079
  file: Windows6.1-KB3080079-x64.msu
  url: https://download.microsoft.com/download/F/4/1/F4154AD2-2119-48B4-BF99-CC15F68E110D/Windows6.1-KB3080079-x64.msu

enable_tls_support_hotfix_download_location: 'C:\Windows\Temp'
# no longer available
#enable_tls_support_hotfix:
#  kb: kb3154518
#  file: windows6.1-kb3154518-x64.msu
#  url: http://download.microsoft.com/download/6/8/0/680ee424-358c-4fdf-a0de-b45dee07b711/windows6.1-kb3154518-x64.msu

# fix: https://support.microsoft.com/en-us/topic/security-and-quality-rollup-for-net-framework-3-5-1-for-windows-7-sp1-and-windows-server-2008-r2-sp1-kb-4040980-71f9f600-4878-a9d4-6b36-93cafad2eefe
enable_tls_support_hotfix:
  kb: kb4040980
  file: windows6.1-kb4040980-x64_83282fb5210091802984ead0d4175879056d602c.msu
  url: http://download.windowsupdate.com/c/msdownload/update/software/secu/2017/09/windows6.1-kb4040980-x64_83282fb5210091802984ead0d4175879056d602c.msu

wmf_3_hotfix_download_location: 'C:\Windows\Temp'
wmf_3_hotfix:
  kb: kb2506143
  file: Windows6.1-KB2506143-x64.msu
  url: https://download.microsoft.com/download/E/7/6/E76850B8-DA6E-4FF5-8CCE-A24FC513FD16/Windows6.1-KB2506143-x64.msu

dot_net_452_download_location: 'C:\Windows\Temp'
dot_net_452:
  kb: kb2901907
  file: NDP452-KB2901907-x86-x64-AllOS-ENU.exe
  url: https://download.microsoft.com/download/E/2/1/E21644B5-2DF2-47C2-91BD-63C560427900/NDP452-KB2901907-x86-x64-AllOS-ENU.exe

dot_net_security_hotfix_download_location: 'C:\Windows\Temp'
dot_net_security_hotfix:
  kb: KB2898850
  file: Windows8.1-KB2898850-x64.msu
  url: http://download.microsoft.com/download/C/6/9/C690CC33-18F7-405D-B18A-0A8E199E531C/Windows8.1-KB2898850-x64.msu

windows_update_agent_url: http://download.windowsupdate.com/windowsupdate/redist/standalone/7.6.7600.320/windowsupdateagent-7.6-x64.exe

#sdelete_download_url: http://web.archive.org/web/20140902022253/http://download.sysinternals.com/files/SDelete.zip
bleachbit_download_url: https://download.bleachbit.org/BleachBit-4.0.0-portable.zip
sdelete_download_url: https://download.sysinternals.com/files/SDelete.zip
#ultradefrag_download_url: http://downloads.sourceforge.net/project/ultradefrag/stable-release/6.1.0/ultradefrag-portable-6.1.0.bin.amd64.zip
ultradefrag_download_url: https://sourceforge.net/projects/ultradefrag/files/stable-release/7.1.4/ultradefrag-portable-7.1.4.bin.amd64.zip/download

enable_auto_logon: yes

target_ovirt: no
target_qemu: no
target_ec2: no
target_vagrant: no

bleachbit_clean: yes
bleachbit_free_disk_space: yes

ec2_ena_driver_role: oatakan.windows_ec2_ena_driver
ovirt_guest_agent_role: oatakan.windows_ovirt_guest_agent
virtio_role: oatakan.windows_virtio
vmware_tools_role: oatakan.windows_vmware_tools
virtualbox_guest_additions_role: oatakan.windows_virtualbox_guest_additions
windows_update_role: oatakan.windows_update

policy:
  allow_unauthenticated_guest_access: no

local_administrator_password: Chang3MyP@ssw0rd21
local_account_username: ansible
local_account_password: Chang3MyP@ssw0rd21

shutdown_instance: yes

winsxs_cleanmgr_file:
  2008r2: '{{ ansible_env.windir }}\winsxs\amd64_microsoft-windows-cleanmgr_31bf3856ad364e35_6.1.7600.16385_none_c9392808773cd7da\cleanmgr.exe'
  2012: '{{ ansible_env.windir }}\WinSxS\amd64_microsoft-windows-cleanmgr_31bf3856ad364e35_6.2.9200.16384_none_c60dddc5e750072a\cleanmgr.exe'
winsxs_cleanmgr_mui_file:
  2008r2: '{{ ansible_env.windir }}\winsxs\amd64_microsoft-windows-cleanmgr.resources_31bf3856ad364e35_6.1.7600.16385_en-us_b9cb6194b257cc63\cleanmgr.exe.mui'
  2012: '{{ ansible_env.windir }}\WinSxS\amd64_microsoft-windows-cleanmgr.resources_31bf3856ad364e35_6.2.9200.16384_en-us_b6a01752226afbb3\cleanmgr.exe.mui'

cleanup_registry_keys:
  - Active Setup Temp Folders
  - BranchCache
  - Downloaded Program Files
  - Internet Cache Files
  - Memory Dump Files
  - Old ChkDsk Files
  - Previous Installations
  - Recycle Bin
  - Service Pack Cleanup
  - Setup Log Files
  - System error memory dump files
  - System error minidump files
  - Temporary Files
  - Temporary Setup Files
  - Thumbnail Cache
  - Update Cleanup
  - Upgrade Discarded Files
  - User file versions
  - Windows Defender
  - Windows Error Reporting Archive Files
  - Windows Error Reporting Queue Files
  - Windows Error Reporting System Archive Files
  - Windows Error Reporting System Queue Files
  - Windows ESD installation files
  - Windows Upgrade Log Files